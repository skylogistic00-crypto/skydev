# Finance Transactions - Upload & Auto-Fill Flow\n\n## ğŸ¯ Lokasi Tombol Upload\n\n### Halaman: `/finance/transactions/new`\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                    New Finance Transaction                                 â•‘\nâ•‘                    Create a new expense transaction                        â•‘\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\nâ•‘                                                                            â•‘\nâ•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘\nâ•‘  â”‚     UPLOAD RECEIPT              â”‚  â”‚  TRANSACTION DETAILS         â”‚   â•‘\nâ•‘  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚   â•‘\nâ•‘  â”‚                                 â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  Employee Name *             â”‚   â•‘\nâ•‘  â”‚  â”‚                         â”‚   â”‚  â”‚  [________________________]   â”‚   â•‘\nâ•‘  â”‚  â”‚      ğŸ“¤ CLICK HERE      â”‚   â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â”‚   to upload receipt     â”‚   â”‚  â”‚  Merchant *                  â”‚   â•‘\nâ•‘  â”‚  â”‚      image              â”‚   â”‚  â”‚  [________________________]   â”‚   â•‘\nâ•‘  â”‚  â”‚                         â”‚   â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  Category                    â”‚   â•‘\nâ•‘  â”‚                                 â”‚  â”‚  [Select â–¼]                 â”‚   â•‘\nâ•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â”‚ [Process with OCR] â—„â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€ TOMBOL AUTO-FILL            â”‚   â•‘\nâ•‘  â”‚  â”‚ (Tombol Biru)            â”‚  â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  Date                        â”‚   â•‘\nâ•‘  â”‚                                 â”‚  â”‚  [__/__/____]                â”‚   â•‘\nâ•‘  â”‚  Extracted Text                 â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  Description                 â”‚   â•‘\nâ•‘  â”‚  â”‚ STARBUCKS COFFEE         â”‚  â”‚  â”‚  [________________________]   â”‚   â•‘\nâ•‘  â”‚  â”‚ JAKARTA, 30-11-2024      â”‚  â”‚  â”‚  [________________________]   â”‚   â•‘\nâ•‘  â”‚  â”‚ 2 x CAPPUCCINO = 100000  â”‚  â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â”‚ 1 x PASTRY = 50000       â”‚  â”‚  â”‚  Amount                      â”‚   â•‘\nâ•‘  â”‚  â”‚ TOTAL: 150000            â”‚  â”‚  â”‚  [150000]  â—„â”€ AUTO-FILLED   â”‚   â•‘\nâ•‘  â”‚  â”‚ PPN: 15000               â”‚  â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚  â”‚ TOTAL BAYAR: 165000      â”‚  â”‚  â”‚  PPN (10%)                   â”‚   â•‘\nâ•‘  â”‚  â”‚                          â”‚  â”‚  â”‚  [15000]   â—„â”€ AUTO-FILLED   â”‚   â•‘\nâ•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                              â”‚   â•‘\nâ•‘  â”‚                                 â”‚  â”‚  Total                       â”‚   â•‘\nâ•‘  â”‚                                 â”‚  â”‚  [165000]  â—„â”€ AUTO-FILLED   â”‚   â•‘\nâ•‘  â”‚                                 â”‚  â”‚                              â”‚   â•‘\nâ•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘\nâ•‘                                                                            â•‘\nâ•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘\nâ•‘  â”‚ BREAKDOWN ITEMS                                                  â”‚    â•‘\nâ•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚    â•‘\nâ•‘  â”‚                                                                  â”‚    â•‘\nâ•‘  â”‚ [Add Item]                                                       â”‚    â•‘\nâ•‘  â”‚                                                                  â”‚    â•‘\nâ•‘  â”‚ Description      â”‚ Qty â”‚ Price    â”‚ Subtotal â”‚ [Delete]        â”‚    â•‘\nâ•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚    â•‘\nâ•‘  â”‚ CAPPUCCINO       â”‚  2  â”‚ 50000    â”‚ 100000   â”‚ [ğŸ—‘]            â”‚    â•‘\nâ•‘  â”‚ PASTRY           â”‚  1  â”‚ 50000    â”‚ 50000    â”‚ [ğŸ—‘]            â”‚    â•‘\nâ•‘  â”‚                                                                  â”‚    â•‘\nâ•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘\nâ•‘                                                                            â•‘\nâ•‘                                    [Cancel] [Save Transaction]            â•‘\nâ•‘                                                                            â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n---\n\n## ğŸ”„ Workflow: Upload â†’ OCR â†’ Auto-Fill\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                                                                         â”‚\nâ”‚  STEP 1: UPLOAD IMAGE                                                  â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚\nâ”‚                                                                         â”‚\nâ”‚  User klik area upload                                                 â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  File dialog terbuka                                                   â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  User pilih gambar receipt                                             â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  Preview gambar muncul                                                 â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ STEP 2: KLIK \"PROCESS WITH OCR\"                                â”‚  â”‚\nâ”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚  â”‚\nâ”‚  â”‚                                                                 â”‚  â”‚\nâ”‚  â”‚ Tombol \"Process with OCR\" aktif                                â”‚  â”‚\nâ”‚  â”‚         â”‚                                                      â”‚  â”‚\nâ”‚  â”‚         â–¼                                                      â”‚  â”‚\nâ”‚  â”‚ Loading spinner muncul                                         â”‚  â”‚\nâ”‚  â”‚         â”‚                                                      â”‚  â”‚\nâ”‚  â”‚         â–¼                                                      â”‚  â”‚\nâ”‚  â”‚ Gambar dikirim ke edge function \"vision-google-ocr\"            â”‚  â”‚\nâ”‚  â”‚         â”‚                                                      â”‚  â”‚\nâ”‚  â”‚         â–¼                                                      â”‚  â”‚\nâ”‚  â”‚ Google Vision API memproses gambar                             â”‚  â”‚\nâ”‚  â”‚         â”‚                                                      â”‚  â”‚\nâ”‚  â”‚         â–¼                                                      â”‚  â”‚\nâ”‚  â”‚ Teks diekstrak dari gambar                                     â”‚  â”‚\nâ”‚  â”‚         â”‚                                                      â”‚  â”‚\nâ”‚  â”‚         â–¼                                                      â”‚  â”‚\nâ”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚\nâ”‚  â”‚ â”‚ STEP 3: AUTO-FILL FORM                                 â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚                                                         â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ Teks diparse oleh FinanceOCRParser.ts                  â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”œâ”€â–º extractMerchant()                          â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚   â””â”€â–º \"STARBUCKS COFFEE\"                    â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”œâ”€â–º extractDate()                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚   â””â”€â–º \"2024-11-30\"                          â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”œâ”€â–º extractCategory()                          â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚   â””â”€â–º \"Food\"                                â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”œâ”€â–º extractTotal()                             â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚   â””â”€â–º 150000                                â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”œâ”€â–º extractPPN()                               â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚   â””â”€â–º 15000 (10%)                           â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â””â”€â–º extractBreakdown()                         â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚             â””â”€â–º [{qty: 2, price: 50000, ...}, ...]   â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚                                                         â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â–¼                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ Form fields di-update dengan nilai parsed             â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â”‚                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚         â–¼                                              â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… Merchant: \"STARBUCKS COFFEE\"                       â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… Date: \"2024-11-30\"                                 â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… Category: \"Food\"                                   â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… Amount: 150000                                      â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… PPN: 15000                                          â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… Total: 165000                                       â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ âœ… Breakdown items: 2 items                            â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚                                                         â”‚   â”‚  â”‚\nâ”‚  â”‚ â”‚ Toast notification: \"OCR Processed\"                    â”‚   â”‚  â”‚\nâ”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚\nâ”‚  â”‚                                                                 â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  STEP 4: REVIEW & EDIT                                                â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚\nâ”‚                                                                         â”‚\nâ”‚  User bisa:                                                            â”‚\nâ”‚  â€¢ Edit field yang salah                                              â”‚\nâ”‚  â€¢ Tambah/hapus breakdown items                                       â”‚\nâ”‚  â€¢ Ubah category jika perlu                                           â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  STEP 5: SAVE TRANSACTION                                             â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚\nâ”‚                                                                         â”‚\nâ”‚  Klik \"Save Transaction\"                                              â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  File di-upload ke storage \"finance-documents\"                        â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  Data disimpan ke database:                                           â”‚\nâ”‚  â€¢ finance_transactions (1 row)                                       â”‚\nâ”‚  â€¢ finance_transaction_breakdown (2 rows)                             â”‚\nâ”‚         â”‚                                                              â”‚\nâ”‚         â–¼                                                              â”‚\nâ”‚  âœ… Success! Redirect ke list page                                    â”‚\nâ”‚                                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ“Š Data Flow: OCR â†’ Parser â†’ Form\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                                                                      â”‚\nâ”‚  GAMBAR RECEIPT                                                      â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚\nâ”‚  [ğŸ“· Foto receipt]                                                   â”‚\nâ”‚         â”‚                                                            â”‚\nâ”‚         â–¼                                                            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ EDGE FUNCTION: vision-google-ocr                            â”‚   â”‚\nâ”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ Input: base64 image                                         â”‚   â”‚\nâ”‚  â”‚ Process: Google Vision API                                  â”‚   â”‚\nâ”‚  â”‚ Output: Extracted text                                      â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ \"STARBUCKS COFFEE                                            â”‚   â”‚\nâ”‚  â”‚  JAKARTA, 30-11-2024                                        â”‚   â”‚\nâ”‚  â”‚  2 x CAPPUCCINO = 100000                                    â”‚   â”‚\nâ”‚  â”‚  1 x PASTRY = 50000                                         â”‚   â”‚\nâ”‚  â”‚  TOTAL: 150000                                              â”‚   â”‚\nâ”‚  â”‚  PPN: 15000                                                 â”‚   â”‚\nâ”‚  â”‚  TOTAL BAYAR: 165000\"                                       â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚         â”‚                                                            â”‚\nâ”‚         â–¼                                                            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ PARSER: FinanceOCRParser.ts                                 â”‚   â”‚\nâ”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ parseOCRText(fullText)                                      â”‚   â”‚\nâ”‚  â”‚   â”œâ”€ extractMerchant()                                      â”‚   â”‚\nâ”‚  â”‚   â”‚  â””â”€ Regex: /\\b([A-Z][a-zA-Z]+(?:\\s+[A-Z][a-zA-Z]+)+)/ â”‚   â”‚\nâ”‚  â”‚   â”‚     Result: \"STARBUCKS COFFEE\"                         â”‚   â”‚\nâ”‚  â”‚   â”‚                                                          â”‚   â”‚\nâ”‚  â”‚   â”œâ”€ extractDate()                                          â”‚   â”‚\nâ”‚  â”‚   â”‚  â””â”€ Regex: /(\\d{2})[-/](\\d{2})[-/](\\d{4})/             â”‚   â”‚\nâ”‚  â”‚   â”‚     Result: \"2024-11-30\"                               â”‚   â”‚\nâ”‚  â”‚   â”‚                                                          â”‚   â”‚\nâ”‚  â”‚   â”œâ”€ extractCategory()                                      â”‚   â”‚\nâ”‚  â”‚   â”‚  â””â”€ Keyword match: \"COFFEE\" â†’ \"Food\"                  â”‚   â”‚\nâ”‚  â”‚   â”‚     Result: \"Food\"                                     â”‚   â”‚\nâ”‚  â”‚   â”‚                                                          â”‚   â”‚\nâ”‚  â”‚   â”œâ”€ extractTotal()                                         â”‚   â”‚\nâ”‚  â”‚   â”‚  â””â”€ Regex: /TOTAL.*?(\\d+)/                             â”‚   â”‚\nâ”‚  â”‚   â”‚     Result: 150000                                      â”‚   â”‚\nâ”‚  â”‚   â”‚                                                          â”‚   â”‚\nâ”‚  â”‚   â”œâ”€ extractPPN()                                           â”‚   â”‚\nâ”‚  â”‚   â”‚  â””â”€ Calculate: 150000 Ã— 0.1 = 15000                    â”‚   â”‚\nâ”‚  â”‚   â”‚     Result: 15000                                       â”‚   â”‚\nâ”‚  â”‚   â”‚                                                          â”‚   â”‚\nâ”‚  â”‚   â””â”€ extractBreakdown()                                     â”‚   â”‚\nâ”‚  â”‚      â””â”€ Regex: /(\\d+)\\s*[xX@]?\\s*([\\d,.]+)\\s*=?\\s*([\\d,.]+)/ â”‚   â”‚\nâ”‚  â”‚         Result: [                                           â”‚   â”‚\nâ”‚  â”‚           {qty: 2, price: 50000, subtotal: 100000},        â”‚   â”‚\nâ”‚  â”‚           {qty: 1, price: 50000, subtotal: 50000}          â”‚   â”‚\nâ”‚  â”‚         ]                                                   â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ Return: {                                                   â”‚   â”‚\nâ”‚  â”‚   merchant: \"STARBUCKS COFFEE\",                            â”‚   â”‚\nâ”‚  â”‚   date: \"2024-11-30\",                                      â”‚   â”‚\nâ”‚  â”‚   category: \"Food\",                                        â”‚   â”‚\nâ”‚  â”‚   total: 150000,                                            â”‚   â”‚\nâ”‚  â”‚   ppn: 15000,                                               â”‚   â”‚\nâ”‚  â”‚   breakdown: [...]                                          â”‚   â”‚\nâ”‚  â”‚ }                                                            â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚         â”‚                                                            â”‚\nâ”‚         â–¼                                                            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ REACT COMPONENT: FinanceTransactionsPage.tsx                â”‚   â”‚\nâ”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ setFormData({                                               â”‚   â”‚\nâ”‚  â”‚   merchant: \"STARBUCKS COFFEE\",                            â”‚   â”‚\nâ”‚  â”‚   date_trans: \"2024-11-30\",                                â”‚   â”‚\nâ”‚  â”‚   category: \"Food\",                                        â”‚   â”‚\nâ”‚  â”‚   amount: 150000,                                           â”‚   â”‚\nâ”‚  â”‚   ppn: 15000,                                               â”‚   â”‚\nâ”‚  â”‚   total: 165000                                             â”‚   â”‚\nâ”‚  â”‚ })                                                           â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ setBreakdownItems([                                         â”‚   â”‚\nâ”‚  â”‚   {qty: 2, price: 50000, subtotal: 100000},               â”‚   â”‚\nâ”‚  â”‚   {qty: 1, price: 50000, subtotal: 50000}                 â”‚   â”‚\nâ”‚  â”‚ ])                                                           â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â”‚ âœ… Form fields updated!                                     â”‚   â”‚\nâ”‚  â”‚ âœ… Breakdown table populated!                               â”‚   â”‚\nâ”‚  â”‚                                                              â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚         â”‚                                                            â”‚\nâ”‚         â–¼                                                            â”‚\nâ”‚  USER SEES:                                                          â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚\nâ”‚  âœ… Merchant: \"STARBUCKS COFFEE\"                                    â”‚\nâ”‚  âœ… Date: \"2024-11-30\"                                              â”‚\nâ”‚  âœ… Category: \"Food\"                                                â”‚\nâ”‚  âœ… Amount: 150000                                                   â”‚\nâ”‚  âœ… PPN: 15000                                                       â”‚\nâ”‚  âœ… Total: 165000                                                    â”‚\nâ”‚  âœ… Breakdown items: 2 items                                         â”‚\nâ”‚                                                                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ¯ Tombol & Fitur Lokasi\n\n| Fitur | Lokasi | Tombol | Status |\n|-------|--------|--------|--------|\n| Upload Image | Kiri atas | Area upload (ğŸ“¤) | âœ… Aktif |\n| Process OCR | Kiri tengah | \"Process with OCR\" (Biru) | âœ… Aktif |\n| View Extracted Text | Kiri bawah | Text area (read-only) | âœ… Aktif |\n| Edit Form Fields | Kanan | Input fields | âœ… Aktif |\n| Add Breakdown Item | Bawah | \"Add Item\" | âœ… Aktif |\n| Save Transaction | Bawah kanan | \"Save Transaction\" (Biru) | âœ… Aktif |\n\n---\n\n## ğŸ” Supabase Integration Points\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                                                             â”‚\nâ”‚  SUPABASE CLIENT (src/lib/supabase.ts)                     â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚\nâ”‚                                                             â”‚\nâ”‚  â”œâ”€ Storage: finance-documents                            â”‚\nâ”‚  â”‚  â””â”€ Upload: transactions/{filename}                    â”‚\nâ”‚  â”‚                                                         â”‚\nâ”‚  â”œâ”€ Database: finance_transactions                        â”‚\nâ”‚  â”‚  â””â”€ Insert: {merchant, date, amount, ppn, total, ...} â”‚\nâ”‚  â”‚                                                         â”‚\nâ”‚  â”œâ”€ Database: finance_transaction_breakdown               â”‚\nâ”‚  â”‚  â””â”€ Insert: {qty, price, subtotal, description}       â”‚\nâ”‚  â”‚                                                         â”‚\nâ”‚  â””â”€ Database: finance_approvals                           â”‚\nâ”‚     â””â”€ Insert: {level, status, approved_by, notes}       â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## âœ… Checklist Sebelum Menggunakan\n\n- [ ] Migration sudah dijalankan\n- [ ] Tables sudah dibuat (3 table)\n- [ ] Storage bucket \"finance-documents\" sudah ada\n- [ ] Edge function \"vision-google-ocr\" sudah deployed\n- [ ] Supabase environment variables sudah set\n- [ ] User sudah login\n- [ ] Browser console tidak ada error\n\n**Jika semua âœ…, fitur siap digunakan!**\n