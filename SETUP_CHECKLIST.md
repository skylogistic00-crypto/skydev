# Finance Transactions Feature - Setup Checklist\n\n## âœ… Sudah Selesai\n\n### Database & Storage\n- [x] Migration file dibuat: `supabase/migrations/20240354_create_finance_transactions_tables.sql`\n- [x] Tables dibuat:\n  - [x] `finance_transactions`\n  - [x] `finance_transaction_breakdown`\n  - [x] `finance_approvals`\n- [x] Storage bucket: `finance-documents`\n- [x] Storage policies (read/write/delete)\n\n### React Components\n- [x] `src/components/FinanceTransactionsPage.tsx` - Form input + upload\n- [x] `src/components/FinanceTransactionsList.tsx` - List view\n- [x] `src/components/FinanceTransactionDetail.tsx` - Detail + approval\n\n### Utility Functions\n- [x] `src/utils/FinanceOCRParser.ts` - OCR parsing functions\n  - [x] `extractMerchant(text)`\n  - [x] `extractDate(text)`\n  - [x] `extractCategory(text)`\n  - [x] `extractBreakdown(text)`\n  - [x] `extractPPN(total)`\n  - [x] `extractTotal(text)`\n  - [x] `parseOCRText(text)`\n\n### Routing\n- [x] Route `/finance/transactions` - List\n- [x] Route `/finance/transactions/new` - Form\n- [x] Route `/finance/transactions/:id` - Detail\n- [x] Navigation link di sidebar\n- [x] Navigation link di home dashboard\n\n### Supabase Integration\n- [x] Supabase client sudah terhubung\n- [x] Environment variables sudah set:\n  - [x] `VITE_SUPABASE_URL`\n  - [x] `VITE_SUPABASE_ANON_KEY`\n\n---\n\n## ğŸ”„ Langkah Selanjutnya (Untuk Menjalankan)\n\n### 1. Jalankan Migration\n```bash\n# Di Supabase dashboard atau via CLI\nsupabase migration up\n```\n\n**Atau manual di Supabase SQL Editor:**\n1. Buka Supabase Dashboard\n2. Pilih project Anda\n3. Buka SQL Editor\n4. Copy-paste isi file: `supabase/migrations/20240354_create_finance_transactions_tables.sql`\n5. Klik \"Run\"\n\n### 2. Verifikasi Tables Dibuat\n1. Buka Supabase Dashboard â†’ Tables\n2. Pastikan ada:\n   - `finance_transactions`\n   - `finance_transaction_breakdown`\n   - `finance_approvals`\n\n### 3. Verifikasi Storage Bucket\n1. Buka Supabase Dashboard â†’ Storage\n2. Pastikan ada bucket: `finance-documents`\n\n### 4. Deploy Edge Function (Jika Belum)\n```bash\n# Pastikan edge function vision-google-ocr sudah deployed\nsupabase functions deploy vision-google-ocr\n```\n\n### 5. Test Fitur\n1. Buka browser: `http://localhost:5173/finance/transactions`\n2. Klik \"New Transaction\"\n3. Upload gambar receipt\n4. Klik \"Process with OCR\"\n5. Verifikasi form auto-fill\n6. Klik \"Save Transaction\"\n7. Verifikasi data tersimpan di database\n\n---\n\n## ğŸ“‹ Fitur yang Sudah Tersedia\n\n### Form Input Page (`/finance/transactions/new`)\n- [x] Upload image dengan preview\n- [x] Tombol \"Process with OCR\"\n- [x] Extracted text display\n- [x] Auto-fill form fields:\n  - [x] Employee Name\n  - [x] Merchant\n  - [x] Category\n  - [x] Date\n  - [x] Description\n  - [x] Amount\n  - [x] PPN (auto-calculated 10%)\n  - [x] Total (auto-calculated)\n- [x] Breakdown items table\n- [x] Add/edit/delete breakdown items\n- [x] Save transaction dengan file upload\n\n### List Page (`/finance/transactions`)\n- [x] Tabel dengan kolom: merchant, employee, category, amount, status, date\n- [x] Search by merchant/employee\n- [x] Filter by status\n- [x] Filter by category\n- [x] Row clickable â†’ detail page\n- [x] Tombol \"New Transaction\"\n- [x] Refresh button\n\n### Detail Page (`/finance/transactions/:id`)\n- [x] Display transaction info\n- [x] Display file URL (link ke dokumen)\n- [x] Breakdown items table\n- [x] Approval history\n- [x] Tombol Approve/Reject\n- [x] Multi-level approval workflow\n- [x] Call RPC saat level terakhir approved\n\n---\n\n## ğŸ¯ Tombol Upload & Auto-Fill Location\n\n### Halaman: `/finance/transactions/new`\n\n**Kolom Kiri (Upload Section):**\n```\nâ”Œâ”€ Upload Receipt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                                  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  ğŸ“¤ Click to upload      â”‚   â”‚\nâ”‚  â”‚     receipt image        â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                  â”‚\nâ”‚  [Process with OCR] â† TOMBOL     â”‚\nâ”‚                                  â”‚\nâ”‚  Extracted Text:                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚ (multiline text)         â”‚   â”‚\nâ”‚  â”‚ (dari OCR)               â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Kolom Kanan (Form Section):**\n```\nâ”Œâ”€ Transaction Details â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                                  â”‚\nâ”‚ Employee Name: [____________]    â”‚\nâ”‚ Merchant: [__________________]   â”‚\nâ”‚ Category: [Select â–¼]             â”‚\nâ”‚ Date: [__/__/____]               â”‚\nâ”‚                                  â”‚\nâ”‚ Description:                     â”‚\nâ”‚ [____________________________]    â”‚\nâ”‚ [____________________________]    â”‚\nâ”‚                                  â”‚\nâ”‚ Amount: [__________]             â”‚\nâ”‚ PPN (10%): [________] (auto)     â”‚\nâ”‚ Total: [__________] (auto)       â”‚\nâ”‚                                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ”— Supabase Connection Status\n\n```\nâœ… Supabase Client: CONNECTED\n   - URL: ${VITE_SUPABASE_URL}\n   - Auth: ${VITE_SUPABASE_ANON_KEY}\n\nâœ… Storage Bucket: finance-documents\n   - Upload path: transactions/{filename}\n   - Public access: Yes\n\nâœ… Database Tables:\n   - finance_transactions (main)\n   - finance_transaction_breakdown (items)\n   - finance_approvals (workflow)\n\nâœ… Edge Functions:\n   - vision-google-ocr (OCR processing)\n   - create_journal_from_payload (accounting)\n```\n\n---\n\n## ğŸ“ Jika Ada Masalah\n\n### OCR tidak bekerja?\n- Cek: Edge function `vision-google-ocr` sudah deployed?\n- Cek: Browser console (F12) untuk error\n- Cek: Network tab â†’ lihat response dari edge function\n\n### Data tidak tersimpan?\n- Cek: Migration sudah dijalankan?\n- Cek: Supabase dashboard â†’ Tables (ada 3 table?)\n- Cek: User sudah login?\n\n### File tidak ter-upload?\n- Cek: Storage bucket `finance-documents` ada?\n- Cek: File size < 10MB?\n- Cek: Storage policies sudah set?\n\n---\n\n## ğŸš€ Ready to Use!\n\nSemua file sudah dibuat dan siap digunakan. Tinggal:\n1. âœ… Jalankan migration\n2. âœ… Verifikasi tables & storage\n3. âœ… Test fitur\n\nSelamat menggunakan! ğŸ‰\n